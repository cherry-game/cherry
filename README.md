# ğŸ’ æ¬¢è¿ä½¿ç”¨ cherryï¼

![cherry logo](https://img.shields.io/badge/cherry--game-cherry-red)
![cherry license](https://img.shields.io/github/license/cherry-game/cherry)
![go version](https://img.shields.io/github/go-mod/go-version/cherry-game/cherry)
![cherry tag](https://img.shields.io/github/v/tag/cherry-game/cherry)

- **é«˜æ€§èƒ½åˆ†å¸ƒå¼çš„ Golang æ¸¸æˆæœåŠ¡å™¨æ¡†æ¶**
- é‡‡ç”¨ Golang + Actor Model æ„å»ºï¼Œå…·å¤‡é«˜æ€§èƒ½ã€å¯ä¼¸ç¼©ç­‰ç‰¹æ€§
- ç®€å•æ˜“å­¦ï¼Œè®©å¼€å‘è€…æ›´ä¸“æ³¨äºæ¸¸æˆä¸šåŠ¡å¼€å‘

## ğŸ“¢ é‡è¦æ›´æ–°

- **æ–°å¢ Actor model å®ç°**
- **æ–°å¢ simple ç½‘ç»œæ•°æ®åŒ…ç»“æ„**ï¼ˆid(4bytes) + dataLen(4bytes) + data(n bytes)ï¼‰
- **ç¤ºä¾‹ä»£ç è¿ç§»**ï¼š[examples](https://github.com/cherry-game/examples)
- **ç»„ä»¶åº“è¿ç§»**ï¼š[components](https://github.com/cherry-game/components)
- **æ–‡æ¡£åœ°å€**ï¼š[ç‚¹å‡»æŸ¥çœ‹](https://cherry-game.github.io/)

## ğŸ’¬ è®¨è®ºä¸äº¤æµ

- åŠ å…¥ QQ ç¾¤ï¼š[191651647](https://jq.qq.com/?_wv=1027&k=vdIddlK0)

## ğŸ“– ç¤ºä¾‹

### å•èŠ‚ç‚¹ç²¾ç®€ç‰ˆèŠå¤©å®¤

é€‚åˆæ–°æ‰‹ç†Ÿæ‚‰é¡¹ç›®ï¼Œå…·å¤‡ä»¥ä¸‹ç‰¹æ€§ï¼š

- åŸºäºç½‘é¡µå®¢æˆ·ç«¯ï¼Œæ„å»º HTTP æœåŠ¡å™¨
- é‡‡ç”¨ WebSocket ä½œä¸ºè¿æ¥å™¨
- ä½¿ç”¨ JSON ä½œä¸ºé€šä¿¡æ ¼å¼
- å®ç°åˆ›å»ºæˆ¿é—´ã€å‘é€æ¶ˆæ¯ã€å¹¿æ’­æ¶ˆæ¯ç­‰åŠŸèƒ½

å‡†å¤‡æ­¥éª¤ï¼š

  * [ç¯å¢ƒå®‰è£…ä¸é…ç½®](https://cherry-game.github.io/guides/install-go.html)
  * æºç ä½ç½®ï¼š[examples/demo_chat](https://github.com/cherry-game/examples/tree/master/demo_chat)

### å¤šèŠ‚ç‚¹åˆ†å¸ƒå¼æ¸¸æˆç¤ºä¾‹

é€‚åˆä½œä¸ºåŸºç¡€æ¡†æ¶æ„å»ºæ¸¸æˆæœåŠ¡ç«¯ï¼Œç‰¹æ€§å¦‚ä¸‹ï¼š

- åŸºäº H5 æ„å»ºå®¢æˆ·ç«¯
- æ­å»º Web æœã€ç½‘å…³æœã€ä¸­å¿ƒæœã€æ¸¸æˆæœç­‰èŠ‚ç‚¹
- å®ç°åŒºæœåˆ—è¡¨ã€å¤š SDK å¸å·ä½“ç³»ã€å¸å·æ³¨å†Œã€ç™»å½•ã€åˆ›å»ºè§’è‰²ç­‰åŠŸèƒ½

å‡†å¤‡æ­¥éª¤ï¼š

  * [ç¯å¢ƒå®‰è£…ä¸é…ç½®](https://cherry-game.github.io/guides/install-go.html)
  * æºç ä½ç½®ï¼š[examples/demo_cluster](https://github.com/cherry-game/examples/tree/master/demo_cluster)

## ğŸŒŸ æ ¸å¿ƒåŠŸèƒ½

### ç»„ä»¶ç®¡ç†

- ä»¥ç»„ä»¶æ–¹å¼ç»„åˆåŠŸèƒ½ï¼Œä¾¿äºç»Ÿä¸€ç®¡ç†ç”Ÿå‘½å‘¨æœŸ
- æ”¯æŒè‡ªå®šä¹‰ç»„ä»¶æ³¨å†Œï¼Œçµæ´»æ‰©å±•
- å¯é…ç½®é›†ç¾¤æ¨¡å¼å’Œå•æœºæ¨¡å¼

### ç¯å¢ƒé…ç½®

- æ”¯æŒå¤šç¯å¢ƒå‚æ•°é…ç½®åˆ‡æ¢
- åŸºäº profile æ–‡ä»¶é…ç½®ç³»ç»Ÿå’Œç»„ä»¶å‚æ•°
- å¯è‡ªç”±æ‹†åˆ†æˆ–ç»„è£… profile å­æ–‡ä»¶ï¼Œç²¾ç®€é…ç½®

### Actor æ¨¡å‹

- æ¯ä¸ª Actor ç‹¬ç«‹è¿è¡Œäºä¸€ä¸ª goroutineï¼Œé€»è¾‘ä¸²è¡Œå¤„ç†
- æ¥æ”¶æœ¬åœ°ã€è¿œç¨‹ã€äº‹ä»¶ä¸‰ç§æ¶ˆæ¯ï¼Œå„è‡ªæœ‰ç‹¬ç«‹é˜Ÿåˆ—æŒ‰ FIFO åŸåˆ™æ¶ˆè´¹
- å¯åˆ›å»ºå­ Actorï¼Œæ¶ˆæ¯ç”±çˆ¶ Actor è·¯ç”±è½¬å‘
- æ”¯æŒè·¨èŠ‚ç‚¹ Actor é€šä¿¡

### é›†ç¾¤ & æ³¨å†Œå‘ç°

- æä¾›ä¸‰ç§å‘ç°æœåŠ¡å®ç°æ–¹å¼
- åŸºäº nats.io å®ç° RPC è°ƒç”¨ï¼Œæä¾›åŒæ­¥ / å¼‚æ­¥æ–¹å¼

### è¿æ¥å™¨

- æ”¯æŒ tcpã€websocketã€http serverã€http client ç­‰
- kcp ç»„ä»¶è®¡åˆ’åç»­é›†æˆ

### æ¶ˆæ¯ & è·¯ç”±

- å®ç°å¤šç§ç½‘ç»œæ•°æ®åŒ…ç»“æ„åŠç¼–è§£ç 
- æ”¯æŒæ¶ˆæ¯è·¯ç”±ã€åºåˆ—åŒ–ï¼ˆjson/protobufï¼‰ã€äº‹ä»¶å¤„ç†

### æ—¥å¿—

- åŸºäº uber zap å°è£…ï¼Œæ€§èƒ½ä¼˜è‰¯
- æ”¯æŒå¤šæ–‡ä»¶è¾“å‡ºã€æ—¥å¿—åˆ‡å‰²ç­‰åŠŸèƒ½

## ğŸ§° æ‰©å±•ç»„ä»¶

### å·²å¼€æ”¾ç»„ä»¶

  * **data-config ç»„ä»¶** ï¼šç­–åˆ’é…è¡¨è¯»å–ç®¡ç†ï¼Œæ”¯æŒå¤šç§åŠ è½½æ–¹å¼åŠæ•°æ®æŸ¥è¯¢
  * **etcd ç»„ä»¶** ï¼šåŸºäº etcd å°è£…ï¼Œç”¨äºèŠ‚ç‚¹é›†ç¾¤å’Œæ³¨å†Œå‘ç°
  * **gin ç»„ä»¶** ï¼šé›†æˆ gin å®ç° http server åŠŸèƒ½ï¼Œå¢åŠ ç®¡ç†å‘¨æœŸå’Œä¸­é—´ä»¶ç»„ä»¶
  * **gorm ç»„ä»¶** ï¼šé›†æˆ gorm å®ç° mysql æ•°æ®åº“è®¿é—®ï¼Œæ”¯æŒå¤šæ•°æ®åº“é…ç½®
  * **mongo ç»„ä»¶** ï¼šé›†æˆ mongo-driverï¼Œæ”¯æŒå¤š mongodb æ•°æ®åº“é…ç½®
  * **cron ç»„ä»¶** ï¼šåŸºäº robfig/cron å°è£…ï¼Œæ€§èƒ½è‰¯å¥½

### å¾…å¼€æ”¾ç»„ä»¶

- db é˜Ÿåˆ—ã€gopher-lua è„šæœ¬ã€é™æµç»„ä»¶ç­‰

## ğŸ® æ¸¸æˆå®¢æˆ·ç«¯ SDK

### é€šä¿¡åè®®æ ¼å¼

  * [åè®®ç»“æ„å›¾](_docs/pomelo-protocol.jpg)
  * [pomelo wiki åè®®æ ¼å¼](https://github.com/NetEase/pomelo/wiki/%E5%8D%8F%E8%AE%AE%E6%A0%BC%E5%BC%8F)

### å„å¹³å°å®¢æˆ·ç«¯

  * **unity3d** ï¼š[YMoonRiver/Pomelo_UnityWebSocket](https://github.com/YMoonRiver/Pomelo_UnityWebSocket-2.7.0)ã€[NetEase/pomelo-unityclient](https://github.com/NetEase/pomelo-unityclient) ç­‰
  * **cocos2dx** ï¼š[NetEase/pomelo-cocos2dchat](https://github.com/NetEase/pomelo-cocos2dchat)
  * **Javascript** ï¼š[pomelonode/pomelo-jsclient-websocket](https://github.com/pomelonode/pomelo-jsclient-websocket) ç­‰
  * **C** ï¼š[topfreegames/libpitaya](https://github.com/topfreegames/libpitaya)ã€[NetEase/libpomelo](https://github.com/NetEase/libpomelo/) ç­‰
  * **iOS** ï¼š[NetEase/pomelo-iosclient](https://github.com/NetEase/pomelo-iosclient) ç­‰
  * **Android & Java** ï¼š[NetEase/pomelo-androidclient](https://github.com/NetEase/pomelo-androidclient) ç­‰
  * **å¾®ä¿¡** ï¼š[wangsijie/pomelo-weixin-client](https://github.com/wangsijie/pomelo-weixin-client)

## ğŸ—ºï¸ æ¸¸æˆæœåŠ¡ç«¯æ¶æ„ç¤ºä¾‹

![game-server-architecture](_docs/game-server-architecture.jpg)

## ğŸ™ è‡´è°¢

- [pomelo](https://github.com/NetEase/pomelo)

- [pitaya](https://github.com/topfreegames/pitaya)
